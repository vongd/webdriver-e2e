var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { PageDecorator } from '../utils.js';
import { WindowControls, ContextMenu } from '../index.js';
import { Menu } from './Menu.js';
import { MenuItem } from './MenuItem.js';
import { TitleBar as TitleBarLocators } from '../../locators/1.73.0.js';
/**
 * Page object representing the custom VSCode title bar
 *
 * @category Menu
 */
let TitleBar = class TitleBar extends Menu {
    constructor() {
        super(...arguments);
        /**
         * @private
         */
        this.locatorKey = 'TitleBar';
    }
    /**
     * Get title bar item by name
     * @param name name of the item to search by
     * @returns Promise resolving to TitleBarItem object
     */
    async getItem(name) {
        try {
            const titleBar = new TitleBarItem(this.locatorMap, this.locators.itemConstructor(name), this);
            await titleBar.wait();
            return titleBar;
        }
        catch (err) {
            return undefined;
        }
    }
    /**
     * Get all title bar items
     * @returns Promise resolving to array of TitleBarItem objects
     */
    async getItems() {
        const items = [];
        const elements = await this.itemElement$$;
        for (const element of elements) {
            const isDisplayed = await element.isDisplayed();
            if (!isDisplayed) {
                continue;
            }
            const item = new TitleBarItem(this.locatorMap, await element.getAttribute(this.locators.itemLabel), this);
            await item.wait();
            items.push(item);
        }
        return items;
    }
    /**
     * Get the window title
     * @returns Promise resolving to the window title
     */
    async getTitle() {
        const title = await this.title$.getText();
        /**
         * when testing VSCode on the web the element is not
         * visible and the text will be "", therefor we need
         * to fetch the HTML
         */
        if (title.length === 0) {
            return this.title$.getHTML(false);
        }
        return title;
    }
    /**
     * Get a reference to the WindowControls
     */
    getWindowControls() {
        return new WindowControls(this.locatorMap, this.elem);
    }
};
TitleBar = __decorate([
    PageDecorator(TitleBarLocators)
], TitleBar);
export { TitleBar };
/**
 * Page object representing an item of the custom VSCode title bar
 *
 * @category Menu
 */
let TitleBarItem = class TitleBarItem extends MenuItem {
    constructor(locators, label, parentMenu) {
        super(locators, locators.TitleBar.itemConstructor(label));
        this.label = label;
        this.parentMenu = parentMenu;
        /**
         * @private
         */
        this.locatorKey = 'TitleBar';
        this.parentMenu = parentMenu;
        this.label = label;
    }
    async select() {
        const openMenus = await browser.$$(this.locatorMap.ContextMenu.elem);
        if (openMenus.length > 0 && await openMenus[0].isDisplayed()) {
            await browser.keys('Escape');
        }
        await this.elem.click();
        const menu = new ContextMenu(this.locatorMap, this.elem);
        await menu.wait();
        return menu;
    }
};
TitleBarItem = __decorate([
    PageDecorator(TitleBarLocators)
], TitleBarItem);
export { TitleBarItem };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGl0bGVCYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFnZW9iamVjdHMvbWVudS9UaXRsZUJhci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUUsYUFBYSxFQUFvQyxNQUFNLGFBQWEsQ0FBQTtBQUM3RSxPQUFPLEVBQUUsY0FBYyxFQUFFLFdBQVcsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUN6RCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBQ2hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDeEMsT0FBTyxFQUFFLFFBQVEsSUFBSSxnQkFBZ0IsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBR3ZFOzs7O0dBSUc7QUFFSSxJQUFNLFFBQVEsR0FBZCxNQUFNLFFBQVMsU0FBUSxJQUE2QjtJQUFwRDs7UUFDSDs7V0FFRztRQUNJLGVBQVUsR0FBRyxVQUFtQixDQUFBO0lBdUUzQyxDQUFDO0lBckVHOzs7O09BSUc7SUFDSCxLQUFLLENBQUMsT0FBTyxDQUFFLElBQVk7UUFDdkIsSUFBSTtZQUNBLE1BQU0sUUFBUSxHQUFHLElBQUksWUFBWSxDQUM3QixJQUFJLENBQUMsVUFBVSxFQUNmLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUNuQyxJQUFJLENBQ1AsQ0FBQTtZQUNELE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ3JCLE9BQU8sUUFBUSxDQUFBO1NBQ2xCO1FBQUMsT0FBTyxHQUFHLEVBQUU7WUFDVixPQUFPLFNBQVMsQ0FBQTtTQUNuQjtJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsUUFBUTtRQUNWLE1BQU0sS0FBSyxHQUFtQixFQUFFLENBQUE7UUFDaEMsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFBO1FBRXpDLEtBQUssTUFBTSxPQUFPLElBQUksUUFBUSxFQUFFO1lBQzVCLE1BQU0sV0FBVyxHQUFHLE1BQU0sT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFBO1lBQy9DLElBQUksQ0FBQyxXQUFXLEVBQUU7Z0JBQ2QsU0FBUTthQUNYO1lBRUQsTUFBTSxJQUFJLEdBQUcsSUFBSSxZQUFZLENBQ3pCLElBQUksQ0FBQyxVQUFVLEVBQ2YsTUFBTSxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQ25ELElBQUksQ0FDUCxDQUFBO1lBQ0QsTUFBTSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUE7WUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtTQUNuQjtRQUNELE9BQU8sS0FBSyxDQUFBO0lBQ2hCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsUUFBUTtRQUNWLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUV6Qzs7OztXQUlHO1FBQ0gsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNwQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO1NBQ3BDO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVEOztPQUVHO0lBQ0gsaUJBQWlCO1FBQ2IsT0FBTyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUN6RCxDQUFDO0NBQ0osQ0FBQTtBQTNFWSxRQUFRO0lBRHBCLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQztHQUNuQixRQUFRLENBMkVwQjtTQTNFWSxRQUFRO0FBOEVyQjs7OztHQUlHO0FBRUksSUFBTSxZQUFZLEdBQWxCLE1BQU0sWUFBYSxTQUFRLFFBQWlDO0lBTS9ELFlBQ0ksUUFBMEIsRUFDbkIsS0FBYSxFQUNiLFVBQXlDO1FBRWhELEtBQUssQ0FBQyxRQUFRLEVBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxlQUE0QixDQUFDLEtBQUssQ0FBVyxDQUFDLENBQUE7UUFIMUUsVUFBSyxHQUFMLEtBQUssQ0FBUTtRQUNiLGVBQVUsR0FBVixVQUFVLENBQStCO1FBUnBEOztXQUVHO1FBQ0ksZUFBVSxHQUFHLFVBQW1CLENBQUE7UUFRbkMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDdEIsQ0FBQztJQUVELEtBQUssQ0FBQyxNQUFNO1FBQ1IsTUFBTSxTQUFTLEdBQUcsTUFBTSxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQWMsQ0FBQyxDQUFBO1FBQzlFLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksTUFBTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUU7WUFDMUQsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBO1NBQy9CO1FBQ0QsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1FBRXZCLE1BQU0sSUFBSSxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3hELE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFBO1FBQ2pCLE9BQU8sSUFBSSxDQUFBO0lBQ2YsQ0FBQztDQUNKLENBQUE7QUEzQlksWUFBWTtJQUR4QixhQUFhLENBQUMsZ0JBQWdCLENBQUM7R0FDbkIsWUFBWSxDQTJCeEI7U0EzQlksWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VEZWNvcmF0b3IsIElQYWdlRGVjb3JhdG9yLCBWU0NvZGVMb2NhdG9yTWFwIH0gZnJvbSAnLi4vdXRpbHMuanMnXG5pbXBvcnQgeyBXaW5kb3dDb250cm9scywgQ29udGV4dE1lbnUgfSBmcm9tICcuLi9pbmRleC5qcydcbmltcG9ydCB7IE1lbnUgfSBmcm9tICcuL01lbnUuanMnXG5pbXBvcnQgeyBNZW51SXRlbSB9IGZyb20gJy4vTWVudUl0ZW0uanMnXG5pbXBvcnQgeyBUaXRsZUJhciBhcyBUaXRsZUJhckxvY2F0b3JzIH0gZnJvbSAnLi4vLi4vbG9jYXRvcnMvMS43My4wLmpzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFRpdGxlQmFyIGV4dGVuZHMgSVBhZ2VEZWNvcmF0b3I8dHlwZW9mIFRpdGxlQmFyTG9jYXRvcnM+IHt9XG4vKipcbiAqIFBhZ2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VzdG9tIFZTQ29kZSB0aXRsZSBiYXJcbiAqXG4gKiBAY2F0ZWdvcnkgTWVudVxuICovXG5AUGFnZURlY29yYXRvcihUaXRsZUJhckxvY2F0b3JzKVxuZXhwb3J0IGNsYXNzIFRpdGxlQmFyIGV4dGVuZHMgTWVudTx0eXBlb2YgVGl0bGVCYXJMb2NhdG9ycz4ge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcHVibGljIGxvY2F0b3JLZXkgPSAnVGl0bGVCYXInIGFzIGNvbnN0XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGl0bGUgYmFyIGl0ZW0gYnkgbmFtZVxuICAgICAqIEBwYXJhbSBuYW1lIG5hbWUgb2YgdGhlIGl0ZW0gdG8gc2VhcmNoIGJ5XG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gVGl0bGVCYXJJdGVtIG9iamVjdFxuICAgICAqL1xuICAgIGFzeW5jIGdldEl0ZW0gKG5hbWU6IHN0cmluZyk6IFByb21pc2U8VGl0bGVCYXJJdGVtIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0aXRsZUJhciA9IG5ldyBUaXRsZUJhckl0ZW0oXG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhdG9yTWFwLFxuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRvcnMuaXRlbUNvbnN0cnVjdG9yKG5hbWUpLFxuICAgICAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF3YWl0IHRpdGxlQmFyLndhaXQoKVxuICAgICAgICAgICAgcmV0dXJuIHRpdGxlQmFyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0aXRsZSBiYXIgaXRlbXNcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBhcnJheSBvZiBUaXRsZUJhckl0ZW0gb2JqZWN0c1xuICAgICAqL1xuICAgIGFzeW5jIGdldEl0ZW1zICgpOiBQcm9taXNlPFRpdGxlQmFySXRlbVtdPiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zOiBUaXRsZUJhckl0ZW1bXSA9IFtdXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gYXdhaXQgdGhpcy5pdGVtRWxlbWVudCQkXG5cbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0Rpc3BsYXllZCA9IGF3YWl0IGVsZW1lbnQuaXNEaXNwbGF5ZWQoKVxuICAgICAgICAgICAgaWYgKCFpc0Rpc3BsYXllZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgVGl0bGVCYXJJdGVtKFxuICAgICAgICAgICAgICAgIHRoaXMubG9jYXRvck1hcCxcbiAgICAgICAgICAgICAgICBhd2FpdCBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLmxvY2F0b3JzLml0ZW1MYWJlbCksXG4gICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXdhaXQgaXRlbS53YWl0KClcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbXNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdpbmRvdyB0aXRsZVxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRoZSB3aW5kb3cgdGl0bGVcbiAgICAgKi9cbiAgICBhc3luYyBnZXRUaXRsZSAoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnRpdGxlJC5nZXRUZXh0KClcblxuICAgICAgICAvKipcbiAgICAgICAgICogd2hlbiB0ZXN0aW5nIFZTQ29kZSBvbiB0aGUgd2ViIHRoZSBlbGVtZW50IGlzIG5vdFxuICAgICAgICAgKiB2aXNpYmxlIGFuZCB0aGUgdGV4dCB3aWxsIGJlIFwiXCIsIHRoZXJlZm9yIHdlIG5lZWRcbiAgICAgICAgICogdG8gZmV0Y2ggdGhlIEhUTUxcbiAgICAgICAgICovXG4gICAgICAgIGlmICh0aXRsZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpdGxlJC5nZXRIVE1MKGZhbHNlKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRpdGxlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBXaW5kb3dDb250cm9sc1xuICAgICAqL1xuICAgIGdldFdpbmRvd0NvbnRyb2xzICgpOiBXaW5kb3dDb250cm9scyB7XG4gICAgICAgIHJldHVybiBuZXcgV2luZG93Q29udHJvbHModGhpcy5sb2NhdG9yTWFwLCB0aGlzLmVsZW0pXG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRpdGxlQmFySXRlbSBleHRlbmRzIElQYWdlRGVjb3JhdG9yPHR5cGVvZiBUaXRsZUJhckxvY2F0b3JzPiB7fVxuLyoqXG4gKiBQYWdlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gaXRlbSBvZiB0aGUgY3VzdG9tIFZTQ29kZSB0aXRsZSBiYXJcbiAqXG4gKiBAY2F0ZWdvcnkgTWVudVxuICovXG5AUGFnZURlY29yYXRvcihUaXRsZUJhckxvY2F0b3JzKVxuZXhwb3J0IGNsYXNzIFRpdGxlQmFySXRlbSBleHRlbmRzIE1lbnVJdGVtPHR5cGVvZiBUaXRsZUJhckxvY2F0b3JzPiB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9jYXRvcktleSA9ICdUaXRsZUJhcicgYXMgY29uc3RcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgbG9jYXRvcnM6IFZTQ29kZUxvY2F0b3JNYXAsXG4gICAgICAgIHB1YmxpYyBsYWJlbDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgcGFyZW50TWVudTogTWVudTx0eXBlb2YgVGl0bGVCYXJMb2NhdG9ycz5cbiAgICApIHtcbiAgICAgICAgc3VwZXIobG9jYXRvcnMsIChsb2NhdG9ycy5UaXRsZUJhci5pdGVtQ29uc3RydWN0b3IgYXMgRnVuY3Rpb24pKGxhYmVsKSBhcyBzdHJpbmcpXG4gICAgICAgIHRoaXMucGFyZW50TWVudSA9IHBhcmVudE1lbnVcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsXG4gICAgfVxuXG4gICAgYXN5bmMgc2VsZWN0ICgpIHtcbiAgICAgICAgY29uc3Qgb3Blbk1lbnVzID0gYXdhaXQgYnJvd3Nlci4kJCh0aGlzLmxvY2F0b3JNYXAuQ29udGV4dE1lbnUuZWxlbSBhcyBzdHJpbmcpXG4gICAgICAgIGlmIChvcGVuTWVudXMubGVuZ3RoID4gMCAmJiBhd2FpdCBvcGVuTWVudXNbMF0uaXNEaXNwbGF5ZWQoKSkge1xuICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5rZXlzKCdFc2NhcGUnKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZWxlbS5jbGljaygpXG5cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBDb250ZXh0TWVudSh0aGlzLmxvY2F0b3JNYXAsIHRoaXMuZWxlbSlcbiAgICAgICAgYXdhaXQgbWVudS53YWl0KClcbiAgICAgICAgcmV0dXJuIG1lbnVcbiAgICB9XG59XG4iXX0=