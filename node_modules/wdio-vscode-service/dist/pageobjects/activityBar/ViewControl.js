var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { DebugView, SideBarView, ScmView } from '../../index.js';
import { NewScmView } from '../sidebar/scm/NewScmView.js';
import { PageDecorator, ElementWithContextMenu } from '../utils.js';
import { ViewControl as ViewControlLocators } from '../../locators/1.73.0.js';
/**
 * Page object representing a view container item in the activity bar
 *
 * ```ts
 * const workbench = await browser.getWorkbench()
 * const viewControls = await workbench.getActivityBar().getViewControls()
 * console.log(await Promise.all(viewControls.map((vc) => vc.getTitle())))
 * // returns: [
 * //    'Explorer',
 * //    'Search',
 * //    'Source Control',
 * //    'Run and Debug',
 * //    'Extensions'
 * // ]
 * ```
 *
 * @category ActivityBar
 */
let ViewControl = class ViewControl extends ElementWithContextMenu {
    constructor(locators, element, bar) {
        super(locators, element, bar.elem);
        this.bar = bar;
        /**
         * @private
         */
        this.locatorKey = 'ViewControl';
    }
    /**
     * Opens the associated view if not already open
     * @returns Promise resolving to SideBarView object representing the opened view
     */
    async openView() {
        const klass = await this.elem.getAttribute(this.locators.attribute);
        if (klass.indexOf(this.locators.klass) < 0) {
            await this.elem.click();
            // eslint-disable-next-line wdio/no-pause
            await browser.pause(500);
        }
        const view = await new SideBarView(this.locatorMap).wait();
        if ((await view.elem.$$(this.locators.scmId)).length > 0) {
            if (await browser.getVSCodeChannel() === 'vscode' && await browser.getVSCodeVersion() >= '1.47.0') {
                return new NewScmView(this.locatorMap).wait();
            }
            return new ScmView(this.locatorMap).wait();
        }
        if ((await view.elem.$$(this.locators.debugId)).length > 0) {
            return new DebugView(this.locatorMap).wait();
        }
        return view;
    }
    /**
     * Closes the associated view if not already closed
     * @returns Promise resolving when the view closes
     */
    async closeView() {
        const klass = await this.elem.getAttribute(this.locators.attribute);
        if (klass.indexOf(this.locators.klass) > -1) {
            await this.elem.click();
        }
    }
    /**
     * Returns the title of the associated view
     * @param includeKeyboardShortcuts if true it includes the keyboard shortcut
     *                                 in the title (e.g. "Source Control (Ctrl+Shift+G)")
     */
    async getTitle(includeKeyboardShortcuts = false) {
        const title = await this.badge$.getAttribute('aria-label');
        if (!includeKeyboardShortcuts) {
            /**
             * first strip out possible pending annotation, e.g.
             * "Source Control (⌃⇧G) - 8 pending
             */
            const [label] = title.split(' - ');
            /**
             * next, strip out possible keyboard shortcuts, e.g.
             * "Source Control (⌃⇧G)
             */
            return label.endsWith(')')
                ? label.split(' ').slice(0, -1).join(' ')
                : label;
        }
        return title;
    }
};
ViewControl = __decorate([
    PageDecorator(ViewControlLocators)
], ViewControl);
export { ViewControl };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlld0NvbnRyb2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFnZW9iamVjdHMvYWN0aXZpdHlCYXIvVmlld0NvbnRyb2wudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUEsT0FBTyxFQUNVLFNBQVMsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUMvQyxNQUFNLGdCQUFnQixDQUFBO0FBQ3ZCLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQTtBQUV6RCxPQUFPLEVBQ0gsYUFBYSxFQUFrQixzQkFBc0IsRUFDeEQsTUFBTSxhQUFhLENBQUE7QUFDcEIsT0FBTyxFQUFFLFdBQVcsSUFBSSxtQkFBbUIsRUFBRSxNQUFNLDBCQUEwQixDQUFBO0FBRzdFOzs7Ozs7Ozs7Ozs7Ozs7OztHQWlCRztBQUVJLElBQU0sV0FBVyxHQUFqQixNQUFNLFdBQVksU0FBUSxzQkFBa0Q7SUFNL0UsWUFDSSxRQUEwQixFQUMxQixPQUFxRCxFQUM5QyxHQUFnQjtRQUV2QixLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7UUFGM0IsUUFBRyxHQUFILEdBQUcsQ0FBYTtRQVIzQjs7V0FFRztRQUNJLGVBQVUsR0FBRyxhQUFzQixDQUFBO0lBUTFDLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsUUFBUTtRQUNWLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNuRSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDeEMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBO1lBQ3ZCLHlDQUF5QztZQUN6QyxNQUFNLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDM0I7UUFDRCxNQUFNLElBQUksR0FBRyxNQUFNLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtRQUMxRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUN0RCxJQUFJLE1BQU0sT0FBTyxDQUFDLGdCQUFnQixFQUFFLEtBQUssUUFBUSxJQUFJLE1BQU0sT0FBTyxDQUFDLGdCQUFnQixFQUFFLElBQUksUUFBUSxFQUFFO2dCQUMvRixPQUFPLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQTthQUNoRDtZQUNELE9BQU8sSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1NBQzdDO1FBQ0QsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDeEQsT0FBTyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDL0M7UUFDRCxPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsU0FBUztRQUNYLE1BQU0sS0FBSyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNuRSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtZQUN6QyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUE7U0FDMUI7SUFDTCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNILEtBQUssQ0FBQyxRQUFRLENBQUUsd0JBQXdCLEdBQUcsS0FBSztRQUM1QyxNQUFNLEtBQUssR0FBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFBO1FBQzFELElBQUksQ0FBQyx3QkFBd0IsRUFBRTtZQUMzQjs7O2VBR0c7WUFDSCxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUVsQzs7O2VBR0c7WUFDSCxPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDO2dCQUN0QixDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDekMsQ0FBQyxDQUFDLEtBQUssQ0FBQTtTQUNkO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQztDQUNKLENBQUE7QUExRVksV0FBVztJQUR2QixhQUFhLENBQUMsbUJBQW1CLENBQUM7R0FDdEIsV0FBVyxDQTBFdkI7U0ExRVksV0FBVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQ2hhaW5hYmxlUHJvbWlzZUVsZW1lbnQgfSBmcm9tICd3ZWJkcml2ZXJpbydcblxuaW1wb3J0IHtcbiAgICBBY3Rpdml0eUJhciwgRGVidWdWaWV3LCBTaWRlQmFyVmlldywgU2NtVmlld1xufSBmcm9tICcuLi8uLi9pbmRleC5qcydcbmltcG9ydCB7IE5ld1NjbVZpZXcgfSBmcm9tICcuLi9zaWRlYmFyL3NjbS9OZXdTY21WaWV3LmpzJ1xuXG5pbXBvcnQge1xuICAgIFBhZ2VEZWNvcmF0b3IsIElQYWdlRGVjb3JhdG9yLCBFbGVtZW50V2l0aENvbnRleHRNZW51LCBWU0NvZGVMb2NhdG9yTWFwXG59IGZyb20gJy4uL3V0aWxzLmpzJ1xuaW1wb3J0IHsgVmlld0NvbnRyb2wgYXMgVmlld0NvbnRyb2xMb2NhdG9ycyB9IGZyb20gJy4uLy4uL2xvY2F0b3JzLzEuNzMuMC5qcydcblxuZXhwb3J0IGludGVyZmFjZSBWaWV3Q29udHJvbCBleHRlbmRzIElQYWdlRGVjb3JhdG9yPHR5cGVvZiBWaWV3Q29udHJvbExvY2F0b3JzPiB7IH1cbi8qKlxuICogUGFnZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgdmlldyBjb250YWluZXIgaXRlbSBpbiB0aGUgYWN0aXZpdHkgYmFyXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHdvcmtiZW5jaCA9IGF3YWl0IGJyb3dzZXIuZ2V0V29ya2JlbmNoKClcbiAqIGNvbnN0IHZpZXdDb250cm9scyA9IGF3YWl0IHdvcmtiZW5jaC5nZXRBY3Rpdml0eUJhcigpLmdldFZpZXdDb250cm9scygpXG4gKiBjb25zb2xlLmxvZyhhd2FpdCBQcm9taXNlLmFsbCh2aWV3Q29udHJvbHMubWFwKCh2YykgPT4gdmMuZ2V0VGl0bGUoKSkpKVxuICogLy8gcmV0dXJuczogW1xuICogLy8gICAgJ0V4cGxvcmVyJyxcbiAqIC8vICAgICdTZWFyY2gnLFxuICogLy8gICAgJ1NvdXJjZSBDb250cm9sJyxcbiAqIC8vICAgICdSdW4gYW5kIERlYnVnJyxcbiAqIC8vICAgICdFeHRlbnNpb25zJ1xuICogLy8gXVxuICogYGBgXG4gKlxuICogQGNhdGVnb3J5IEFjdGl2aXR5QmFyXG4gKi9cbkBQYWdlRGVjb3JhdG9yKFZpZXdDb250cm9sTG9jYXRvcnMpXG5leHBvcnQgY2xhc3MgVmlld0NvbnRyb2wgZXh0ZW5kcyBFbGVtZW50V2l0aENvbnRleHRNZW51PHR5cGVvZiBWaWV3Q29udHJvbExvY2F0b3JzPiB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9jYXRvcktleSA9ICdWaWV3Q29udHJvbCcgYXMgY29uc3RcblxuICAgIGNvbnN0cnVjdG9yIChcbiAgICAgICAgbG9jYXRvcnM6IFZTQ29kZUxvY2F0b3JNYXAsXG4gICAgICAgIGVsZW1lbnQ6IENoYWluYWJsZVByb21pc2VFbGVtZW50PFdlYmRyaXZlcklPLkVsZW1lbnQ+LFxuICAgICAgICBwdWJsaWMgYmFyOiBBY3Rpdml0eUJhclxuICAgICkge1xuICAgICAgICBzdXBlcihsb2NhdG9ycywgZWxlbWVudCwgYmFyLmVsZW0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIGFzc29jaWF0ZWQgdmlldyBpZiBub3QgYWxyZWFkeSBvcGVuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gU2lkZUJhclZpZXcgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgb3BlbmVkIHZpZXdcbiAgICAgKi9cbiAgICBhc3luYyBvcGVuVmlldyAoKTogUHJvbWlzZTxTaWRlQmFyVmlldzxhbnk+IHwgTmV3U2NtVmlldyB8IFNjbVZpZXcgfCBEZWJ1Z1ZpZXc+IHtcbiAgICAgICAgY29uc3Qga2xhc3MgPSBhd2FpdCB0aGlzLmVsZW0uZ2V0QXR0cmlidXRlKHRoaXMubG9jYXRvcnMuYXR0cmlidXRlKVxuICAgICAgICBpZiAoa2xhc3MuaW5kZXhPZih0aGlzLmxvY2F0b3JzLmtsYXNzKSA8IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZWxlbS5jbGljaygpXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgd2Rpby9uby1wYXVzZVxuICAgICAgICAgICAgYXdhaXQgYnJvd3Nlci5wYXVzZSg1MDApXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlldyA9IGF3YWl0IG5ldyBTaWRlQmFyVmlldyh0aGlzLmxvY2F0b3JNYXApLndhaXQoKVxuICAgICAgICBpZiAoKGF3YWl0IHZpZXcuZWxlbS4kJCh0aGlzLmxvY2F0b3JzLnNjbUlkKSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IGJyb3dzZXIuZ2V0VlNDb2RlQ2hhbm5lbCgpID09PSAndnNjb2RlJyAmJiBhd2FpdCBicm93c2VyLmdldFZTQ29kZVZlcnNpb24oKSA+PSAnMS40Ny4wJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTmV3U2NtVmlldyh0aGlzLmxvY2F0b3JNYXApLndhaXQoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTY21WaWV3KHRoaXMubG9jYXRvck1hcCkud2FpdCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKChhd2FpdCB2aWV3LmVsZW0uJCQodGhpcy5sb2NhdG9ycy5kZWJ1Z0lkKSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEZWJ1Z1ZpZXcodGhpcy5sb2NhdG9yTWFwKS53YWl0KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgYXNzb2NpYXRlZCB2aWV3IGlmIG5vdCBhbHJlYWR5IGNsb3NlZFxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHdoZW4gdGhlIHZpZXcgY2xvc2VzXG4gICAgICovXG4gICAgYXN5bmMgY2xvc2VWaWV3ICgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qga2xhc3MgPSBhd2FpdCB0aGlzLmVsZW0uZ2V0QXR0cmlidXRlKHRoaXMubG9jYXRvcnMuYXR0cmlidXRlKVxuICAgICAgICBpZiAoa2xhc3MuaW5kZXhPZih0aGlzLmxvY2F0b3JzLmtsYXNzKSA+IC0xKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVsZW0uY2xpY2soKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdGl0bGUgb2YgdGhlIGFzc29jaWF0ZWQgdmlld1xuICAgICAqIEBwYXJhbSBpbmNsdWRlS2V5Ym9hcmRTaG9ydGN1dHMgaWYgdHJ1ZSBpdCBpbmNsdWRlcyB0aGUga2V5Ym9hcmQgc2hvcnRjdXRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSB0aXRsZSAoZS5nLiBcIlNvdXJjZSBDb250cm9sIChDdHJsK1NoaWZ0K0cpXCIpXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VGl0bGUgKGluY2x1ZGVLZXlib2FyZFNob3J0Y3V0cyA9IGZhbHNlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLmJhZGdlJC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKVxuICAgICAgICBpZiAoIWluY2x1ZGVLZXlib2FyZFNob3J0Y3V0cykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBmaXJzdCBzdHJpcCBvdXQgcG9zc2libGUgcGVuZGluZyBhbm5vdGF0aW9uLCBlLmcuXG4gICAgICAgICAgICAgKiBcIlNvdXJjZSBDb250cm9sICjijIPih6dHKSAtIDggcGVuZGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25zdCBbbGFiZWxdID0gdGl0bGUuc3BsaXQoJyAtICcpXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogbmV4dCwgc3RyaXAgb3V0IHBvc3NpYmxlIGtleWJvYXJkIHNob3J0Y3V0cywgZS5nLlxuICAgICAgICAgICAgICogXCJTb3VyY2UgQ29udHJvbCAo4oyD4oenRylcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0dXJuIGxhYmVsLmVuZHNXaXRoKCcpJylcbiAgICAgICAgICAgICAgICA/IGxhYmVsLnNwbGl0KCcgJykuc2xpY2UoMCwgLTEpLmpvaW4oJyAnKVxuICAgICAgICAgICAgICAgIDogbGFiZWxcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aXRsZVxuICAgIH1cbn1cbiJdfQ==